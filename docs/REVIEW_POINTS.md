# 🔍 レビューポイント詳細ガイド

## 1. セキュリティレビュー 🔐

### 認証・認可
- [ ] **パスワードハッシュ化**
  - bcryptのコストファクター（10）は適切か
  - ソルトは自動生成されているか
  ```typescript
  // app/api/auth/register/route.ts
  const hashedPassword = await bcrypt.hash(password, 10);
  ```

- [ ] **JWT実装**
  - トークンの有効期限（24時間）は適切か
  - シークレットキーは環境変数から取得しているか
  - トークンのペイロードに機密情報は含まれていないか
  ```typescript
  // app/api/auth/login/route.ts
  const token = jwt.sign(
    { userId: user.id, email: user.email },
    process.env.JWT_SECRET!,
    { expiresIn: '24h' }
  );
  ```

- [ ] **クッキー設定**
  - httpOnly: true（XSS対策）
  - secure: production環境でtrue（HTTPS強制）
  - sameSite: 'strict'（CSRF対策）

### 入力検証
- [ ] SQLインジェクション対策（Prismaが自動処理）
- [ ] XSS対策（React/Next.jsが自動エスケープ）
- [ ] メールアドレスの形式検証
- [ ] パスワード強度の検証

## 2. コード品質レビュー 📝

### TypeScript
- [ ] **型定義の適切性**
  - any型の使用を避けているか
  - 適切な型推論が行われているか
  - エラーハンドリングの型定義

### エラーハンドリング
- [ ] **API層**
  ```typescript
  try {
    // 処理
  } catch (error) {
    console.error('Error:', error);
    return NextResponse.json(
      { error: 'エラーメッセージ' },
      { status: 500 }
    );
  }
  ```

- [ ] **クライアント層**
  - ユーザーフレンドリーなエラーメッセージ
  - ローディング状態の適切な管理
  - ネットワークエラーの処理

### コードの保守性
- [ ] 関数の責務は単一か
- [ ] 命名規則は一貫しているか
- [ ] 重複コードはないか
- [ ] コメントは適切か

## 3. パフォーマンスレビュー ⚡

### フロントエンド
- [ ] 不要な再レンダリングはないか
- [ ] 適切なローディング表示
- [ ] フォームのリアルタイムバリデーション

### バックエンド
- [ ] データベースクエリの最適化
- [ ] N+1問題の回避
- [ ] 適切なインデックス設定

## 4. UX/UIレビュー 🎨

### アクセシビリティ
- [ ] キーボードナビゲーション対応
- [ ] ARIA属性の適切な使用
- [ ] フォームラベルの関連付け
- [ ] エラーメッセージの視認性

### レスポンシブデザイン
- [ ] モバイル表示の確認
- [ ] タブレット表示の確認
- [ ] ブレークポイントの適切性

### ユーザビリティ
- [ ] フォームの使いやすさ
- [ ] エラーメッセージの明確さ
- [ ] 成功/失敗のフィードバック
- [ ] ローディング状態の表示

## 5. テストカバレッジ 🧪

### 単体テスト（推奨）
- [ ] 認証ロジックのテスト
- [ ] バリデーションロジックのテスト
- [ ] ユーティリティ関数のテスト

### 統合テスト（推奨）
- [ ] 登録フローの完全なテスト
- [ ] ログインフローの完全なテスト
- [ ] セッション管理のテスト

### E2Eテスト（推奨）
- [ ] ユーザー登録シナリオ
- [ ] ログイン/ログアウトシナリオ
- [ ] 認証が必要なページへのアクセス

## 6. ドキュメントレビュー 📚

- [ ] READMEは最新か
- [ ] 環境変数の説明は十分か
- [ ] セットアップ手順は明確か
- [ ] APIドキュメントは完備しているか

## 7. デプロイメント準備 🚀

- [ ] 環境変数の設定確認
- [ ] データベースマイグレーション準備
- [ ] ビルドエラーの確認
- [ ] セキュリティヘッダーの設定

## チェックリスト使用方法

1. **優先度高**：セキュリティ、エラーハンドリング
2. **優先度中**：コード品質、パフォーマンス
3. **優先度低**：ドキュメント、テスト（今回は実装なし）

## レビューコメント例

### 承認コメント
```markdown
LGTM! 👍
セキュリティ実装がしっかりしていて、エラーハンドリングも適切です。
特にJWT実装とクッキー設定が良いですね。
```

### 改善提案コメント
```markdown
全体的に良い実装ですが、以下の点を検討してみてください：
1. パスワードの最小文字数制限（8文字以上）
2. レート制限の実装（ブルートフォース対策）
3. パスワードリセット機能の追加
```

### 質問コメント
```markdown
JWTの有効期限を24時間に設定した理由を教えてください。
ユースケースによっては、もう少し短い期間（例：1時間）+ リフレッシュトークンの方が安全かもしれません。
```